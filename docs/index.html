<!DOCTYPE html>
<html><head>
<title>Documentation</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="" />
<link rel="stylesheet" type="text/css" href="css/kickstart.css" media="all" />                  <!-- KICKSTART -->
<link rel="stylesheet" type="text/css" href="style.css" media="all" />                          <!-- CUSTOM STYLES -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="js/kickstart.js"></script>                                  <!-- KICKSTART -->
</head><body>


<nav class="navbar">
	<ul>
	    <li class="first"><a href="#" title="Vous êtes en plein dedans !" class="tooltip-bottom"><span>doc</span>umentation</a></li>
	    <li><a href="../stories/docky" target="_blank" title="Le mieux, c'est de passer à l'action" class="tooltip-bottom"><span>DEMO</span>NSTRATION</a></li>
	    <li class="last"></li>
	</ul>


</nav>


<!-- ===================================== END HEADER ===================================== -->

<div class="callout callout-top clearfix">
    <div class="grid">
        <h1 class="center"><i class="icon-magic"></i> Racontez des histoires</h1>
        <h4 style="margin-bottom:40px;" class="center">Venez contribuer à ce mystérieux projet…</h4>

        <div class="col_12" style="text-align: center;text-shadow: 0px 1px 3px rgba(0,0,0,0.2);">
            <div class="col_3 column">
                <a href="#objective"><i class="icon-ok-sign icon-4x"></i><br />Objectif</a>
            </div>
            <div class="col_3 column">
                <a href="#technicals"><i class="icon-cogs icon-4x"></i><br />Composants techniques</a>
            </div>
            <div class="col_3 column">
                <a href="#content"><i class="icon-pencil icon-4x"></i><br />Ajout de contenu</a>
            </div>
            <div class="col_3 column">
                <a href="#kernel"><i class="icon-road icon-4x"></i><br />Avancement du noyau</a>
            </div>
        </div>
    </div>
</div>

<div class="grid">




	<div class="col_12">


		<h3 id="objective"><i class="icon-ok-sign"></i> Objectif</h3>
		<div class="panel clearfix">
            <div class="col_12 column">
                <img src="Docky.png" width="140" class="align-right"/>
                <p>
                    Ce projet a pour objectif, à travers une application interactive et embarquée, de développer l’apprentissage des plus jeunes, en s’appuyant sur des mécaniques scénaristiques et ludiques. Le moteur de l’application se veut évolutif et favorise la création de nouveau contenu.<br /><br />
                    L’ergonomie doit être simple, orientée clic/dragNdrop, et accessible à tout type de terminal.<br /><br />
                </p>
                <p>
                    Le code est pour l'instant mis à disposition sur <a href="https://github.com/simpleit/docky" target="_blank">Github <i class="icon-external-link"></i></a> pour une meilleure prise en main des possibilités de l’outil.
                </p>
                <blockquote class="small">
                    <p>
                        <i class="icon-quote-left"></i> Le propre de l'homme est d'atteindre la plénitude et d'apprendre des autres chimpanzés… <i class="icon-quote-right"></i>
                        <span>Sacha Guitry</span>
                    </p>
                </blockquote>

            </div>
		</div>


		<h3 id="technicals"><i class="icon-cogs"></i> Composants techniques</h3>
		<div class="panel clearfix">
			<div class="col_4 column">
                <h4><i class="icon-double-angle-right"></i> Noyau</h4>
                <p>
                    Le noyau de l’application gère les “parties communes” (options, score, écrans d’accueil et de chargement, écrans de conversation). Les principaux composants sont disponibles à la racine du projet, répartis entre les répertoires <code>css</code>, <code>js</code> et <code>ui</code> pour les ressources graphiques.<br /><br/>

                    Tout modification du noyau est envisageable mais soumise à validation.
                </p>
			</div>
            <div class="col_4 column">
                <h4><i class="icon-double-angle-right"></i> Javascript</h4>
                <p>
                    Plusieurs librairies javascript externes ont été mise à profit, comme notamment <a href="http://jquery.com">jQuery <i class="icon-external-link"></i></a>, <a href="http://www.jstorage.info">jStorage <i class="icon-external-link"></i></a> ou encore <a href="http://lodash.com">Lo-Dash <i class="icon-external-link"></i></a>. Le script principal, <code>core.js</code>, gère le déroulement de l’histoire et l’appel des différentes énigmes. L’ensemble de ces composants est placé dans le répertoire <code>js/core</code>.<br /><br />

                    Les moteurs d’énigme sont eux gérés séparément.
                </p>
            </div>
            <div class="col_4 column">
                <h4><i class="icon-double-angle-right"></i> Sécurité</h4>
                <p>
                    L’application est hébergée sur nos serveurs mais peut également être utilisée en local, à des fins de développement. <br />A ce stade du développement, l’utilisation du JS n’exclut pas certaines failles de sécurité et il incombe aux intervenants de vérifier également si leurs modifications n’altèrent pas le noyau du jeu et les données propres aux utilisateurs.
                </p>
            </div>

            <div id="json" class="col_12 column">
                <h4><i class="icon-double-angle-right"></i> JSON</h4>
                <p>
                    Le déroulement d’une histoire s’appuie sur une collection de fichiers au format Json.<br />
                    Ils sont éditables à volonté, sous réserve de respecter la structure établie.
                </p>

            </div>
            <div class="col_4 column">
                <pre>
{
    "name": "docky",
    "episodes": [
        "episode1",
        "episode2"
    ]
}
                </pre>
                <p>
                    <b>1.</b> Fichier story.json<br />
                    <span class="clues">La valeur &laquo; name &raquo; doit reprendre le nom du répertoire de l'histoire.</span>
                </p>
            </div>

            <div class="col_6 column">
                <pre>
{
    "title": "Docky is Back",
    "episodeTitle": "Le village des taupes",
    "episodeNumber": "Episode 1",
    "screens" : []
}

                </pre>
                <p>
                    <b>2.</b> Fichier episode1.json sans écrans (cf. écrans ci-dessous)<br />
                    <span class="clues">La valeur &laquo; title &raquo; correspond au titre de la page tandis
                    que &laquo; episodeTitle &raquo; correspond au nom de l'épisode, affiché sur l'écran de chargement.</span>
            </div>

            <div class="col_6 column">
                <pre>
{
    "id": "screen3",
    "type": "converse",
    "leftCharacter": "docky",
    "rightCharacter": "roger",
    "background": "converse.jpg",
    "lines": [
        {
            "position": "left",
            "text": "Commençons à parler"
        },
        {
            "position": "left",
            "text": "Continuons le texte"
        },
        {
            "position": "right",
            "text": "Etrange ||||||||||| c'est fini !"
        }
    ]
}
                </pre>
                <p>
                    <b>3.</b> écran de conversation - <code>type: converse</code><br/>
                    <span class="clues">
                    <ul class="clues">
                        <li>le caractère &laquo; | &raquo; temporise l'affichage du texte</li>
                        <li>&laquo; leftCharacter &raquo; et &laquo; rightCharacter &raquo; font référence aux personnages présents dans <code>resources/character</code> (ex: docky.png)</li>
                        <li>&laquo; position &raquo; vaut &laquo; left &raquo; ou &laquo; right &raquo; sélectionnant ainsi le personnage qui parle</li>
                    </ul>
                    </span>
                </p>
            </div>

            <div class="col_6 column">
                <pre>
{
    "id": "screen2",
    "type": "enigma",
    "engine": "associate",
    "background": "enigma.png",
    "stylesheet": "associate.css",
    "legend": "Qui mange quoi ?",
    "help": "Veux-tu que je supprime les réponses inutiles ?",
    "assets" : {
        "stack": "enigma1.png"
    }
}
                </pre>
                <p>
                    <b>4.</b> écran Enigme - <code>type: enigma</code><br/>

                    <ul class="clues">
                        <li>&laquo; engine &raquo; fait référence au fichier js à charger : <code>associateEngine.js</code></li>
                        <li>les &laquo; assets &raquo; recensent les ressources à mettre en cache en vue de l'énigme</li>
                    </ul>


                </p>
            </div>

            <div class="col_12 column">
                Un exemple complet est visible <a href="https://github.com/simpleit/docky/blob/master/stories/docky/resources/story/episode1.json">ici.</a>
            </div>

		</div>

		<h3 id="content"><i class="icon-pencil"></i> Ajout de contenu</h3>
		<div class="panel clearfix">

            <div class="col_12 column">
                <h4><i class="icon-double-angle-right"></i> Arborescence</h4>
                <img src="arbo.png" width="200" class="align-left"/>
                <p>Avant d'ajouter du contenu, voici quelques précisions sur l'arborescence du contenu dynamique. "docky" est ici une histoire à part entière. Pour <a href="#createStory">créer une autre histoire</a>, il faudra dupliquer ce répertoire et respecter l'arborescence décrite ci-dessous.</p>
                    <ul>
                        <li><code>/background</code> contient les fonds d'écrans (scénario et conversation)</li>
                        <li><code>/character</code> contient les personnages, au format png, préparés pour l'animation</li>
                        <li><code>/enigma</code> contient les ressources utiles aux énigmes de l'épisode</li>
                        <li><code>/story</code> contient les fichiers Json structurant l'épisode</li>
                        <li><code>episodeXX.html</code> donne un point d'entrée pour l'épisode (seule la balise meta episode change)</li>
                        <li><code>index.html</code> permet d'accéder au jeu, il est identique d'un jeu à l'autre</li>
                    </ul>

            </div>

            <hr />

			<div id="engine" class="col_12 column">
                <h4><i class="icon-double-angle-right"></i> Ajout d’un moteur d’énigme</h4>
                <p>
                    Afin d’étoffer les mécaniques de jeu disponibles, il est possible de soumettre de nouveaux moteurs à travers un fichier .js, éventuellement accompagné du style css correspondant et des ressources graphiques à mettre en place.<br />
                    Exemple : Pour ajouter le moteur <strong>turbo</strong>, nous aurons les fichiers :
                    <ul>
                        <li>/js/turbo.js</li>
                        <li>/css/turbo.css <i>(optionnel)</i></li>
                        <li>/ui/turbo/ressource1.png <i>(optionnel)</i></li>
                        <li>/ui/turbo/spreadsheet1.png <i>(optionnel)</i></li>
                        <li>/ui/turbo/…</li>
                    </ul><br />

                    Les prérequis sont les suivants :
                    <ul>
                        <li>Le moteur doit tenir compte du conteneur de l’énigme, fournie par le noyau : <code>container: null</code>.</li>
                        <li>Le moteur doit fournir une méthode <code>init</code>,  qui instancie et construit l’énigme.</li>
                        <li>Le moteur doit fournir une méthode <code>clean</code>, qui nettoie et détruit tout élément inutile hors du contexte de l’énigme (variables globales, éléments du Dom, …)</li>
                        <li>Le moteur doit fournir une méthode <code>help</code>, utilisable une seule fois, qui aidera l’utilisateur dans la résolution de l’énigme.</li>
                        <li>Le moteur doit fournir une méthode <code>checkResponse</code> qui doit gérer les différents cas de figure envisageables (réponse correcte, incorrecte ou manquante)</li>
                        <li>Lors de la résolution de l’énigme, le moteur doit en informer le noyau de l’application en effectuant l’appel suivant :<br /><br/>

                            <code>$.jStorage.publish("enigmaResolve", nbTry);</code> où nbTry correspond au nombre d’essai du joueur
                        </li>
                    </ul>
                </p>
			</div>

            <hr />

            <div class="col_12 column">
                <h4><i class="icon-double-angle-right"></i> Création d’un épisode</h4>
                <p>
                    Ajouter un épisode commence par l’insertion dans le fichier <code>stories/nom_histoire/resources/story/story.json</code> d'une nouvelle entrée.

                    <pre>
{
    "name": "docky",
    "episodes": [
        "episode1",
        "episode2",
        "episode3"
    ]
}
                    </pre>

                    Puis il faut créer dans ce même répertoire le fichier json correspondant (episodeXX.json), cf <a href="#json">extrait Json #2</a>. <br />
                    Il reste à décider de l'enchaînement des écrans (conversation ou enigme) et à construire l'épisode !
                </p>

                <p class="notice">
                    <i class="icon-info-sign icon-large"></i>Afin de pouvoir tester votre épisode, il est possible de remettre à zéro votre progression en allant sur <code>index.html#reset</code>.
                </p>

                <p>
                    Afin d'ajouter une énigme, il faut soit coder son propre moteur d'énigme, ou en utiliser un déjà existant (en utilisant une nouvelle ressource graphique). Par exemple, pour utiliser le moteur <b>associate</b>, il faut fournir une image contenant les 9 &laquo; pastilles &raquo;.<br />
                    La disposition de ces pastilles respecte une certaine logique dans l'association d'image (la colonne de gauche contient les animaux, celle du milieu les mauvaises réponses, celle de droite les réponses).<br /><br />
                    De son côté le moteur <b>chronology</b> utilise 4 images ordonnées sur une seule colonne.
                    A terme, chaque mécanique de jeu aura sa propre documentation. Cette section n'est qu'une ébauche.


                </p>
            </div>

            <hr />

            <div id="createStory" class="col_12 column">
                <h4><i class="icon-double-angle-right"></i> Création d’une histoire</h4>
                <p>
                    Il suffit de reprendre l'arborescence décrite précédemment, d'importer les resources requises, d'ajouter le fichier <code>index.html</code>, et de créer autant d'<code>episodeXX.html</code>, que d'épisodes requis.
                </p>
                <p class="notice">
                    <i class="icon-info-sign icon-large"></i>Afin de pouvoir mieux gérer le cache, chaque épisode est représenté par son propre fichier .html.
                </p>
            </div>

		</div>

		<h3 id="kernel"><i class="icon-road"></i> Avancement sur le noyau</h3>
        <ul class="tabs">
            <li><a href="#v0.8">Version 0.8 (current)</a></li>
        </ul>
		<div id="v0.8" class="tab-content clearfix">
			<div class="col_4 column">
				<h4><i class="icon-double-angle-right"></i> Ecrans</h4>
				<ul class="icons">
					<li><i class="icon-ok"></i>Ecran d'accueil</li>
					<li><i class="icon-ok"></i>Ecran de chargement d'épisode</li>
					<li><i class="icon-ok"></i>Ecran de conversation</li>
					<li><i class="icon-remove"></i>Ecran choix de trajectoire</li>
					<li><i class="icon-ok"></i>Ecran de chargement d'énigme</li>
					<li><i class="icon-ok"></i>Ecran de fin d'épisode</li>
				</ul>
			</div>
			<div class="col_4 column">
				<h4><i class="icon-double-angle-right"></i> Mécanique</h4>
				<ul class="icons">
					<li><i class="icon-remove"></i>Gestion des options</li>
					<li><i class="icon-remove"></i>Gestion des scores</li>
					<li><i class="icon-remove"></i>Attente du prochain épisode</li>
					<li><i class="icon-remove"></i>Synchronisation des données</li>
					<li><i class="icon-remove"></i>Local storage</li>
				</ul>
			</div>			
			<div class="col_4 column">
				<h4><i class="icon-double-angle-right"></i> Habillage</h4>
				<ul class="icons">
                    <li><i class="icon-remove"></i>Compatibilité navigateurs</li>
					<li><i class="icon-remove"></i>Version responsive</li>
					<li><i class="icon-remove"></i>Accessibilité</li>
					<li><i class="icon-remove"></i>Fond sonore</li>
				</ul>
			</div>
		</div>


	</div>


</div><!-- END GRID-->

<!-- ===================================== START FOOTER ===================================== -->
<div class="clear"></div>
<div id="footer">
    Un projet des créateurs du <a href="http://www.siteduzero.com">Site du Zéro</a>
</div>


</body></html>
